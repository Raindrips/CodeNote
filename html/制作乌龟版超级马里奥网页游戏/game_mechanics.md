# 超级马里奥游戏核心机制研究

## 跳跃机制
1. **可变高度跳跃**：按住跳跃键的时间长短决定跳跃高度
2. **方向控制**：在空中可以改变角色移动方向
3. **冲刺跳跃**：按住冲刺键的同时跳跃可以跳得更高更远
4. **墙壁滑动**：角色在跳跃过程中碰到墙壁时，如果持续按着跳跃键，角色会沿着障碍物向上升到最大高度

## 移动机制
1. **基础移动**：左右方向键控制角色移动
2. **冲刺**：按住特定键（如B键）可以加速移动
3. **惯性**：角色移动有加速和减速过程，不是立即达到最大速度
4. **转向**：通过改变localScale实现角色的转向效果

## 碰撞检测
1. **地面碰撞**：角色与地面的碰撞检测，确保角色站立在地面上
2. **障碍物碰撞**：角色与墙壁、管道等障碍物的碰撞检测
3. **敌人碰撞**：角色与敌人的碰撞检测，从上方踩踏和侧面碰撞有不同效果
4. **道具碰撞**：角色与问号砖块、金币等道具的碰撞检测

## 物理效果
1. **重力**：角色跳跃后会受到重力影响下落
2. **可变重力**：通过调整重力大小实现不同的跳跃和下落效果
   - 下落时增大重力（gravityScale=3）使角色更快落地
   - 按住跳跃键时减小重力（gravityScale=1）延长空中时间
   - 松开跳跃键时中等重力（gravityScale=2）加速下落

## 动画系统
1. **状态切换**：根据角色的不同状态（站立、移动、跳跃、下落）切换不同的动画
2. **简化处理**：跳跃、滞空和下落使用同一个动画状态

## 交互元素
1. **问号砖块**：从下方顶起时会弹出金币或道具，并变为空砖块
2. **普通砖块**：可以被超级状态的角色顶碎
3. **管道**：作为障碍物或传送门
4. **金币**：收集后增加分数

## 敌人行为
1. **基础移动**：大多数敌人沿直线移动，碰到障碍物后改变方向
2. **特殊行为**：不同敌人有不同的行为模式（如乌龟壳可以被踢出）

## 游戏机制实现思路
1. **造假艺术**：游戏不需要完全模拟真实物理，而是通过简化的方式实现看起来真实的效果
2. **视觉反馈**：通过简单的动画和效果提供良好的操作反馈
3. **碰撞优化**：使用碰撞体而非刚体来实现某些不需要物理模拟的元素（如固定的砖块）
