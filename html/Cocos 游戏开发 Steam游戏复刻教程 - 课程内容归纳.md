# Cocos 游戏开发 Steam游戏复刻教程 - 课程内容归纳

## 概述

本教程旨在通过使用Cocos Creator引擎复刻Steam游戏《Cramped Room Of Death》，帮助学习者掌握Cocos Creator游戏开发的核心概念和实践技巧。教程内容涵盖了从基础UI布局到复杂的动画系统、碰撞检测、状态机、数据管理以及场景过渡等多个方面。

## 课程详情




### 01 - 游戏介绍以及前置准备
- **内容概述**: 本节课主要介绍将要复刻的Steam游戏《Cramped Room Of Death》，并进行Cocos Creator项目的前置准备工作，包括项目创建、环境配置等。
- **重点**: 了解项目背景和目标，熟悉Cocos Creator开发环境。
- **知识点**: Cocos Creator项目创建流程，基本项目结构，资源导入与管理。




### 02 - 使用Widget、Layout组件完成UI布局
- **内容概述**: 讲解如何使用Cocos Creator中的Widget和Layout组件进行游戏UI的布局，确保UI在不同分辨率下的适配性。
- **重点**: Widget和Layout组件的灵活运用，UI适配。
- **知识点**: Widget组件（对齐、边距）、Layout组件（水平、垂直、网格布局），多分辨率适配策略。




### 03 - 定义TileMap瓦片地图二维数据和类型
- **内容概述**: 介绍如何定义瓦片地图的二维数据结构和瓦片类型，这是构建游戏地图的基础。
- **重点**: 瓦片地图的数据表示，瓦片类型定义。
- **知识点**: 二维数组、枚举类型、数据结构设计，地图数据与游戏逻辑的关联。




### 04 - 根据数据动态生成TileMap瓦片地图
- **内容概述**: 讲解如何根据预先定义的瓦片地图数据，动态地在Cocos Creator中生成瓦片地图。
- **重点**: 瓦片地图的动态生成，数据驱动。
- **知识点**: 循环遍历数据、实例化预制体、坐标转换、渲染优化。




### 05 - 定义TileManager分离生成逻辑
- **内容概述**: 引入TileManager，将瓦片地图的生成逻辑从主场景或其他模块中分离出来，实现模块化管理。
- **重点**: 模块化设计，职责分离。
- **知识点**: 单例模式、类设计、代码组织与维护。




### 06 - DataManager数据中心单例，TileMap居中适配
- **内容概述**: 讲解如何实现DataManager作为数据中心单例，以及如何使TileMap在屏幕上居中显示并适配不同分辨率。
- **重点**: 数据中心设计，屏幕适配。
- **知识点**: 单例模式（Singleton Pattern），屏幕坐标系，UI布局与适配。




### 07 - 泛型单例模式优化DataManager，ResourceManager，瓦片添加随机效果
- **内容概述**: 进一步优化DataManager和ResourceManager，使用泛型单例模式提高代码复用性，并为瓦片添加随机效果以增加地图多样性。
- **重点**: 泛型单例模式，资源管理，随机效果。
- **知识点**: 泛型（Generics），设计模式（单例模式），随机数生成，纹理切换。




### 08 - 定义EventManager事件中心（发布订阅模式）
- **内容概述**: 讲解如何定义EventManager作为事件中心，实现发布订阅模式，用于解耦游戏中的各个模块。
- **重点**: 事件驱动编程，模块解耦。
- **知识点**: 发布订阅模式（Observer Pattern），事件监听与触发，回调函数。




### 09 - 通过EventManager实现关卡切换
- **内容概述**: 利用EventManager实现的发布订阅模式，来管理和实现游戏中的关卡切换逻辑。
- **重点**: 事件管理在游戏流程中的应用，关卡管理。
- **知识点**: 场景加载与卸载，事件参数传递，游戏状态管理。




### 10 - Animation可视化编辑实现Player人物渲染
- **内容概述**: 讲解如何使用Cocos Creator的可视化动画编辑器来创建和编辑Player人物的动画，实现人物的渲染。
- **重点**: 可视化动画编辑器的使用，人物动画的创建。
- **知识点**: 动画剪辑（AnimationClip），关键帧动画，动画属性（位移、旋转、缩放、透明度等）。




### 11 - Animation程序化编辑实现Player人物渲染
- **内容概述**: 讲解如何通过代码程序化地控制Player人物的动画，实现更灵活的人物渲染。
- **重点**: 程序化动画控制，动画状态管理。
- **知识点**: 动画组件API，动画播放、暂停、停止，动画事件监听。




### 12 - 实现Player人物移动
- **内容概述**: 讲解如何实现Player人物在游戏中的移动逻辑，包括输入检测、移动方向判断和位置更新。
- **重点**: 人物移动逻辑，输入处理。
- **知识点**: 键盘事件监听，向量运算，坐标系转换，物理碰撞（初步）。




### 13 - FSM有限状态机和Marionette动画系统介绍
- **内容概述**: 介绍有限状态机（FSM）的概念及其在游戏开发中的应用，并初步介绍Cocos Creator的Marionette动画系统。
- **重点**: FSM理论，Marionette动画系统。
- **知识点**: 状态、转换、事件，动画状态图，动画混合。




### 14 - 程序化实现FSM有限状态机PlayerStateMachine
- **内容概述**: 详细讲解如何通过代码程序化地实现Player的有限状态机（PlayerStateMachine），管理Player的各种行为状态。
- **重点**: FSM的程序化实现，Player状态管理。
- **知识点**: 状态类设计，状态切换逻辑，状态进入/退出事件，状态模式。




### 15 - 使用动画事件AnimationEvent并提取抽象基类StateMachine
- **内容概述**: 讲解如何利用动画事件（AnimationEvent）在动画播放过程中触发特定逻辑，并提取抽象基类StateMachine，提高代码复用性。
- **重点**: 动画事件的应用，抽象基类的设计。
- **知识点**: 动画事件回调，继承与多态，抽象类。




### 16 - 数据与UI分离，提取State和Direction数据字段作为UI变更入口
- **内容概述**: 强调数据与UI分离的重要性，将Player的State和Direction等数据字段作为UI变更的入口，实现数据驱动UI。
- **重点**: 数据与UI分离，数据驱动。
- **知识点**: MVC/MVVM模式，数据绑定，观察者模式。




### 17 - 使用子状态机SubStateMachine实现同状态不同方向的封装
- **内容概述**: 讲解如何使用子状态机（SubStateMachine）来封装Player在不同方向下的相同状态，简化状态管理。
- **重点**: 子状态机，状态复用。
- **知识点**: 状态机嵌套，状态层次结构。




### 18 - 提取基类EntityManager和DirectionSubStateMachine
- **内容概述**: 提取EntityManager作为所有游戏实体的基类，并进一步抽象DirectionSubStateMachine，提高代码的通用性和可维护性。
- **重点**: 抽象基类，代码通用性。
- **知识点**: 继承，多态，面向对象设计原则。




### 19 - 为TileManager添加碰撞检测所需属性moveable、turnable
- **内容概述**: 为TileManager中的瓦片添加`moveable`和`turnable`等属性，为后续的碰撞检测和路径寻路做准备。
- **重点**: 瓦片属性定义，碰撞检测前置。
- **知识点**: 属性设计，数据结构扩展。




### 20 - 完成Player和TileMap的碰撞检测
- **内容概述**: 讲解如何实现Player与TileMap之间的碰撞检测，确保Player在地图上的正确移动和交互。
- **重点**: 碰撞检测算法，Player与地图交互。
- **知识点**: 碰撞体（Collider），碰撞事件，AABB碰撞检测，网格碰撞检测。




### 21 - 为Player碰撞添加动画效果
- **内容概述**: 在Player发生碰撞时，为其添加相应的动画效果，提升游戏体验。
- **重点**: 碰撞反馈，动画效果。
- **知识点**: 动画播放控制，碰撞事件触发动画。




### 22 - 实现敌人木骷髅WoodenSkeleton渲染
- **内容概述**: 讲解如何实现游戏中的敌人——木骷髅（WoodenSkeleton）的渲染，包括其模型导入和动画设置。
- **重点**: 敌人角色渲染，动画设置。
- **知识点**: 角色导入，动画状态机，动画剪辑。




### 23 - 实现敌人WoodenSkeleton木骷髅朝向Player逻辑
- **内容概述**: 讲解如何实现木骷髅敌人自动朝向Player的逻辑，使其能够追踪Player。
- **重点**: 敌人AI，追踪逻辑。
- **知识点**: 向量方向计算，角度计算，旋转。




### 24 - 完成木骷髅WoodenSkeleton攻击逻辑以及动画
- **内容概述**: 讲解如何实现木骷髅的攻击逻辑和相应的攻击动画，使其能够对Player造成伤害。
- **重点**: 敌人攻击，动画同步。
- **知识点**: 攻击判定，伤害计算，动画事件触发攻击。




### 25 - 完成Player死亡逻辑以及动画
- **内容概述**: 讲解如何实现Player的死亡逻辑，包括生命值判断、死亡动画播放和游戏结束处理。
- **重点**: 角色死亡，游戏结束。
- **知识点**: 生命值系统，死亡动画，场景切换。




### 26 - 完成Player攻击逻辑以及动画
- **内容概述**: 讲解如何实现Player的攻击逻辑和相应的攻击动画，使其能够对敌人造成伤害。
- **重点**: 玩家攻击，动画同步。
- **知识点**: 攻击判定，伤害计算，动画事件触发攻击。




### 27 - 完成WoodenSkeleton死亡逻辑以及动画
- **内容概述**: 讲解如何实现木骷髅敌人的死亡逻辑，包括生命值判断、死亡动画播放和销毁处理。
- **重点**: 敌人死亡，动画同步。
- **知识点**: 生命值系统，死亡动画，对象销毁。




### 28 - 完成木门Door的渲染和开门逻辑
- **内容概述**: 讲解如何实现游戏中的木门（Door）的渲染和开门逻辑，包括门的状态切换和动画。
- **重点**: 场景交互，门机制。
- **知识点**: 动画状态机，碰撞检测，事件触发。




### 29 - 完成敌人铁骷髅IronSkeleton并提取敌人基类EnemyManager
- **内容概述**: 引入新的敌人类型——铁骷髅（IronSkeleton），并提取EnemyManager作为所有敌人的基类，提高代码复用性。
- **重点**: 敌人类型扩展，基类抽象。
- **知识点**: 继承，多态，面向对象设计。




### 30 - 完成Player与骷髅Skeleton、门Door的碰撞检测
- **内容概述**: 讲解如何实现Player与不同类型的敌人（骷髅）和场景元素（门）之间的碰撞检测和交互。
- **重点**: 多对象碰撞检测，交互逻辑。
- **知识点**: 碰撞体，碰撞事件，层级管理。




### 31 - 完成地裂陷阱Burst和Player空中死亡效果
- **内容概述**: 讲解如何实现地裂陷阱（Burst）的机制，以及Player在空中死亡时的特殊效果。
- **重点**: 陷阱机制，特殊死亡效果。
- **知识点**: 动画序列，粒子效果，物理模拟。




### 32 - 完成SpikesOne一刺陷阱渲染
- **内容概述**: 讲解如何实现游戏中的一刺陷阱（SpikesOne）的渲染和基本逻辑。
- **重点**: 陷阱渲染，基本交互。
- **知识点**: 动画，碰撞体，触发器。




### 33 - 完成SpikesTwoThreeFour 二三四刺陷阱渲染
- **内容概述**: 讲解如何实现二刺、三刺、四刺陷阱（SpikesTwoThreeFour）的渲染和逻辑，扩展陷阱类型。
- **重点**: 陷阱类型扩展，动画。
- **知识点**: 动画序列，状态管理。




### 34 - 完成Spikes循环播放以及攻击Player效果
- **内容概述**: 讲解如何实现尖刺陷阱的循环播放动画，并使其能够对Player造成伤害。
- **重点**: 陷阱伤害，动画循环。
- **知识点**: 动画循环模式，碰撞检测，伤害计算。




### 35 - 通过Level文件动态生成所有Entity实体并实现通关逻辑
- **内容概述**: 讲解如何通过外部Level文件动态生成游戏中的所有实体（Entity），并实现关卡通关的逻辑。
- **重点**: 关卡数据驱动，通关逻辑。
- **知识点**: JSON/XML解析，实体实例化，游戏流程控制。




### 36 - 完成移动生成烟雾Smoke
- **内容概述**: 讲解如何在Player移动时生成烟雾（Smoke）效果，增加游戏的视觉反馈。
- **重点**: 粒子效果，视觉反馈。
- **知识点**: 粒子系统，动画，触发器。




### 37 - 完成DrawManager组件实现屏幕渐入渐出效果
- **内容概述**: 讲解如何实现DrawManager组件，用于控制屏幕的渐入渐出效果，常用于场景切换。
- **重点**: 屏幕过渡效果，场景切换。
- **知识点**: 透明度控制，缓动动画，场景管理。




### 38 - 通过FaderManager单例统一管理渐入渐出效果
- **内容概述**: 进一步优化渐入渐出效果的管理，通过FaderManager单例统一控制，提高代码复用性。
- **重点**: 效果统一管理，单例模式。
- **知识点**: 单例模式，模块化设计。




### 39 - 使用Sin正弦函数实现震动效果Shake
- **内容概述**: 讲解如何利用正弦函数（Sin）实现屏幕震动效果，增加游戏打击感。
- **重点**: 屏幕震动，数学函数应用。
- **知识点**: 正弦函数，坐标变换，缓动。




### 40 - 完善震动效果Shake的四个方向
- **内容概述**: 进一步完善屏幕震动效果，使其能够支持上下左右四个方向的震动，提升表现力。
- **重点**: 震动方向，效果多样性。
- **知识点**: 向量，方向控制。




### 41 - 补全Player攻击震动效果和地裂陷阱下坠震动效果
- **内容概述**: 补全Player攻击和地裂陷阱触发时的震动效果，使游戏反馈更加完整。
- **重点**: 震动效果的触发，游戏反馈。
- **知识点**: 动画事件，触发器。




### 42 - 撤回功能，完成Record和Revoke函数
- **内容概述**: 讲解如何实现游戏中的撤回功能，包括记录（Record）游戏状态和撤销（Revoke）到之前的状态。
- **重点**: 撤回功能，状态保存与恢复。
- **知识点**: 栈数据结构，Memento模式。




### 43 - 撤回功能，使用保存的数据实现数据和UI的还原
- **内容概述**: 进一步完善撤回功能，使用保存的数据来还原游戏的数据和UI状态。
- **重点**: 数据还原，UI同步。
- **知识点**: 数据序列化与反序列化，UI更新。




### 44 - 完成Start场景、Battle场景Menu UI和过渡效果
- **内容概述**: 讲解如何完成游戏的开始场景（Start）、战斗场景（Battle）的菜单UI设计和场景间的过渡效果。
- **重点**: 场景管理，UI设计，场景过渡。
- **知识点**: 场景加载，UI布局，动画效果。




### 45 - 完成Loading资源加载场景
- **内容概述**: 讲解如何实现游戏中的Loading资源加载场景，优化用户体验，避免卡顿。
- **重点**: 资源加载，用户体验优化。
- **知识点**: 异步加载，进度条显示，资源管理。



